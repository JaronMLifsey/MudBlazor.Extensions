@using MudBlazor.Extensions.Components.ObjectEdit
@using Microsoft.AspNetCore.Components
@using MudBlazor.Extensions.Helper
@inherits MudExBaseComponent<MudExToggleableSearch>

@if (FilterMode != PropertyFilterMode.Disabled)
{
    <MudTextField @ref="_searchBox"
              OnBlur="@(FilterBoxBlur)"
              OnKeyDown="@(FilterKeyPress)"
              OnKeyUp="@OnKeyUp"
              Class="@($"mud-ex-hide-inputlabel mud-ex-animate-all-properties mud-ex-property-filter {(_searchActive || FilterMode == PropertyFilterMode.AlwaysVisible ? "active" : "")}")"
              Immediate="@Immediate"
              Clearable="@Clearable"
              Value="Filter" T="string"
              ValueChanged="@OnFilterChanged"
              Placeholder="@TryLocalize("Filter")"
              Label="@TryLocalize("Filter")" />
}
@if (FilterMode == PropertyFilterMode.Toggleable)
{
    <MudIconButton Icon="@SearchIcon" Color="@(string.IsNullOrWhiteSpace(Filter) ? SearchButtonColor : Color.Warning)" OnClick="@(ToggleSearchBox)" />
}
