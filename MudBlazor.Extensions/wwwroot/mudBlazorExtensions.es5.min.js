"use strict";function _toConsumableArray(n){if(Array.isArray(n)){for(var t=0,i=Array(n.length);t<n.length;t++)i[t]=n[t];return i}return Array.from(n)}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),MudBlazorExtensionHelper=function(){function n(t,i,r){_classCallCheck(this,n);this.dotnet=i;this.onDone=r;this.options=t;this.mudDialogSelector=t.mudDialogSelector||".mud-dialog";this.mudDialogHeaderSelector=t.mudDialogHeaderSelector||".mud-dialog-title";this.dialog=document.querySelector(this.mudDialogSelector);this.dialogHeader=this.dialog.querySelector(this.mudDialogHeaderSelector)}return _createClass(n,[{key:"init",value:function(){var n=this;this.dialog=this.dialog||document.querySelector(this.mudDialogSelector);this.dialog?this.handleExtensions():(this.observer=new MutationObserver(function(t){var i=t.filter(function(t){return t.addedNodes&&t.addedNodes[0]===document.querySelector(n.mudDialogSelector)});i.length&&(n.dialog=i[0].addedNodes[0],n.observer.disconnect(),n.handleExtensions())}),this.observer.observe(document,{characterData:!0,childList:!0,subtree:!0}))}},{key:"handleExtensions",value:function(){var n=this,i,t;this.options.animation!=null&&this.options.animation!==0&&this.animate(this.options.animationDescription);this.options.disablePositionMargin&&this.dialog.classList.add("mud-dialog-position-fixed");this.options.fullHeight&&(i=this.options.disableSizeMarginY?"mud-dialog-height-full-no-margin":"mud-dialog-height-full",this.dialog.classList.add(i),t=this.dialog.querySelector(".mud-dialog-actions"),t&&t.classList.add("mud-dialog-actions-fixed-bottom"));this.options.fullWidth&&this.options.disableSizeMarginX&&(this.dialog.classList.remove("mud-dialog-width-full"),this.dialog.classList.add("mud-dialog-width-full-no-margin"),this.dialog.classList.contains("mud-dialog-width-false")&&this.dialog.classList.remove("mud-dialog-width-false"));this.options.buttons.forEach(function(t){n.dialogHeader.insertAdjacentHTML("beforeend",t.html);var i=n.dialogHeader.querySelector("#"+t.id);i.onclick=function(){t.id.indexOf("mud-button-maximize")>=0?n.maximize():t.callBackReference.invokeMethodAsync(t.callbackName)}});this.options.dragMode!==0&&this.dialog&&(this.dragElement(this.dialog,this.dialogHeader),this.done());this.options.resizeable&&(this.dialog.style.position="absolute",this.dialog.style.resize="both",this.dialog.style.overflow="auto",this.dialog.style.maxWidth=window.innerWidth+"px",this.dialog.style.maxHeight=window.innerHeight+"px",this.dialog.style.minWidth="100px",this.dialog.style.minHeight="100px")}},{key:"maximize",value:function(){this._oldStyle?(this.dialog.style=this._oldStyle,delete this._oldStyle):(this._oldStyle=this.dialog.style,this.dialog.style.position="absolute",this.dialog.style.left="0px",this.dialog.style.top="0px",this.dialog.style.maxWidth=this.dialog.style.width=window.innerWidth+"px",this.dialog.style.maxHeight=this.dialog.style.height=window.innerHeight+"px")}},{key:"done",value:function(){this.observer&&this.observer.disconnect();this.onDone&&this.onDone()}},{key:"dragElement",value:function(n,t,i){function o(n){n=n||window.event;n.preventDefault();r=n.clientX;u=n.clientY;document.onmouseup=h;document.onmousemove=s}function s(t){t=t||window.event;t.preventDefault();f=r-t.clientX;e=u-t.clientY;r=t.clientX;u=t.clientY;var h={x:i.offsetWidth-n.offsetWidth,y:(i===document.body?window.innerHeight:i.offsetHeight)-n.offsetHeight},o=n.offsetTop-e,s=n.offsetLeft-f;n.style.position="absolute";s>0&&s<h.x&&(n.style.left=s+"px");o>0&&o<h.y&&(n.style.top=o+"px");f=r-t.clientX;e=u-t.clientY;r=t.clientX;u=t.clientY}function h(){document.onmouseup=null;document.onmousemove=null}var f=0,e=0,r=0,u=0;i=i||document.body;t?(t.style.cursor="move",t.onmousedown=o):n.onmousedown=o}},{key:"animate",value:function(n){var r,t=this,u=!1,f=this.options.dialogPositionNames.map(function(t){return"mud-dialog-"+n+"-to-"+t}),e=this.options.dialogPositionNames.map(function(t){return"mud-dialog-"+n+"-from-"+t}),i="mud-dialog-"+this.options.dialogPositionDescription;(r=this.dialog.classList).add.apply(r,_toConsumableArray(e));this.dialog.parentNode.classList.contains(i)&&(this.dialog.parentNode.classList.remove(i),u=!0);this.dialog.style["transition-duration"]=this.options.animationDurationInMs+"ms";this.dialog.style["transition-timing-function"]=this.options.animationTimingFunctionString;setTimeout(function(){var n,r;t.dialog.classList.add("mud-dialog-animate-ex");(n=t.dialog.classList).remove.apply(n,_toConsumableArray(e));(r=t.dialog.classList).add.apply(r,_toConsumableArray(f));setTimeout(function(){var n;t.dialog.style["transition-duration"]=null;t.dialog.style["transition-timing-function"]=null;(n=t.dialog.classList).remove.apply(n,_toConsumableArray(["mud-dialog-animate-ex"].concat(t.options.disablePositionMargin?[]:f)));u&&!t.options.disablePositionMargin&&t.dialog.parentNode.classList.add(i)},t.options.animationDurationInMs)},50)}}]),n}();window.MudBlazorExtensions={helper:null,setNextDialogOptions:function(n,t){MudBlazorExtensions.helper=new MudBlazorExtensionHelper(n,t,function(){MudBlazorExtensions.helper=null;delete MudBlazorExtensions.helper});MudBlazorExtensions.helper.init()},addCss:function(n){var i=n,r=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");r.appendChild(t);t.type="text/css";t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i))}};