class MudExAppLoader extends HTMLElement{constructor(){super();this.loadStylesheet("_content/MudBlazor.Extensions/css/MudExAppLoader.css")}loadStylesheet(n){const t=document.createElement("link");t.rel="stylesheet";t.href=n;document.head.appendChild(t)}connectedCallback(){this.setAttributes();this.setNewMarkup();this.addPercentageObserver()}setAttributes(){this.accentColor=this.getAttribute("AccentColor")||"#ff0000";this.mainAppId=this.getAttribute("MainAppId")||"app";this.logo=this.getAttribute("Logo")||"";document.documentElement.style.setProperty("--loading-color",this.accentColor)}setNewMarkup(){const n=`
          <div class="mud-ex-app-loader-loading-container">
            <div class="mud-ex-app-loader-loading-progress">
              <svg class="mud-ex-app-loader-circle" width="200" height="200" viewBox="0 0 200 200">
                <circle class="mud-ex-app-loader-circle-bg" cx="100" cy="100" r="90" />
                <circle class="mud-ex-app-loader-circle-progress" cx="100" cy="100" r="90" style="stroke: ${this.accentColor}" />
              </svg>
                <img class="logo" src="${this.logo}" /> 
              <span class="mud-ex-app-loader-loading-percentage">Loading...</span>
            </div>
          </div>
        `;this.innerHTML=n}addPercentageObserver(){const n=(n,t)=>{const i=Math.round(n);i!==this.prevPercentage&&(this.prevPercentage=i,requestAnimationFrame(()=>this.updateUI(i)));n>=100&&t.disconnect()};this.observeCSSVariable("--blazor-load-percentage",n)}observeCSSVariable(n,t){const i=new MutationObserver(r=>{r.forEach(r=>{if(r.attributeName==="style"){const u=getComputedStyle(r.target).getPropertyValue(n).trim();if(u){const n=parseFloat(u);t(n,i)}}})});i.observe(document.documentElement,{attributes:!0})}updateUI(n){this.querySelector(".mud-ex-app-loader-loading-percentage").innerHTML=`${n}%`;this.updateCircleProgress(n);n>=100&&setTimeout(()=>{this.querySelector(".mud-ex-app-loader-circle").classList.add("mud-ex-app-loader-circle-glowing"),this.addContentChangeObserver()},2)}addContentChangeObserver(){const n=document.getElementById(this.mainAppId);this.observeContentChanges(n,n=>{const t=this.querySelector(".mud-ex-app-loader-loading-container");t.classList.add("pixelated-out");n.disconnect();setTimeout(()=>{t.remove()},1e3)})}observeContentChanges(n,t){const i=new MutationObserver(n=>{n.forEach(n=>{n.type==="childList"&&t(i)})});i.observe(n,{childList:!0})}updateCircleProgress(n){const t=this.querySelector(".mud-ex-app-loader-circle-progress"),r=t.getAttribute("r"),i=2*Math.PI*r,u=n/100,f=i*(1-u);t.style.strokeDasharray=`${i} ${i}`;t.style.strokeDashoffset=f}}customElements.define("mud-ex-app-loader",MudExAppLoader);