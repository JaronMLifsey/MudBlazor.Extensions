export function initializeMudExSplitter(t,i,r){return new n(t,i,r)}class n{constructor(n,t,i){this.initialize(i);this.documentMouseUp=document.onmouseup;this.documentMouseMove=document.onmousemove}initialize(n){this.options=n;const t=document.querySelector(`.mud-ex-splitter[data-id="${n.id}"]`);t&&this.initSplitter(t)}initSplitter(n){if(this.splitter=n,this.prevElem=n.previousElementSibling,this.prevElem=this.findSiblingElement(n,n=>n.previousElementSibling,["mud-ex-splitter-internal"]),this.nextElem=this.findSiblingElement(n,n=>n.nextElementSibling,["mud-ex-splitter-internal"]),!this.prevElem||!this.nextElem){console.warn("MudExSplitter can only work between 2 elements!");return}this.direction=this.options.verticalSplit?"V":"H";this.stretchOtherDirection();this.dragElement()}findSiblingElement(n,t,i){i=Array.isArray(i)?i:[i];let r=t(n);while(r){if(!i.some(n=>r.classList.contains(n)))return r;r=t(r)}return null}dragElement(){let n;this.splitter.onmousedown=i=>{n=this.getMouseDownInfo(i),document.onmousemove=t,document.onmouseup=()=>{this.resetDocumentMouseEvents(),this.apply()}};const t=t=>{const i=this.getDelta(t,n),{x:r,y:u}=this.getLimitedDelta(i,n);this.direction==="H"?this.updateHorizontalElements(r,n):this.direction==="V"&&this.updateVerticalElements(u,n)}}apply(){this.options.percentage&&this.updateElementsInPercentage();this.stretchOtherDirection()}stretchOtherDirection(){this.direction==="H"?(this.prevElem.style.height="unset",this.nextElem.style.height="unset"):(this.prevElem.style.width="100%",this.nextElem.style.width="100%")}getMouseDownInfo(n){return{event:n,offsetLeft:this.splitter.offsetLeft,offsetTop:this.splitter.offsetTop,prevWidth:this.prevElem.offsetWidth,prevHeight:this.prevElem.offsetHeight,nextWidth:this.nextElem.offsetWidth,nextHeight:this.nextElem.offsetHeight}}getDelta(n,t){return{x:this.options.reverse?t.event.clientX-n.clientX:n.clientX-t.event.clientX,y:this.options.reverse?t.event.clientY-n.clientY:n.clientY-t.event.clientY}}getLimitedDelta(n,t){return this.direction==="H"?n.x=Math.min(Math.max(n.x,-t.prevWidth),t.nextWidth):this.direction==="V"&&(n.y=Math.min(Math.max(n.y,-t.prevHeight),t.nextHeight)),n}updateHorizontalElements(n,t){this.splitter.style.left=t.offsetLeft+n+"px";this.prevElem.style.width=t.prevWidth+n+"px";this.nextElem.style.width=t.nextWidth-n+"px"}updateVerticalElements(n,t){this.splitter.style.top=t.offsetTop+n+"px";this.prevElem.style.height=t.prevHeight+n+"px";this.nextElem.style.height=t.nextHeight-n+"px"}updateElementsInPercentage(){const n=this.prevElem.parentElement.clientWidth,t=this.prevElem.parentElement.clientHeight,i=this.prevElem.offsetWidth/n*100,r=this.prevElem.offsetHeight/t*100,u=this.nextElem.offsetWidth/n*100,f=this.nextElem.offsetHeight/t*100;this.prevElem.style.width=`${i}%`;this.prevElem.style.height=`${r}%`;this.nextElem.style.width=`${u}%`;this.nextElem.style.height=`${f}%`}resetDocumentMouseEvents(){document.onmousemove=this.documentMouseMove;document.onmouseup=this.documentMouseUp}dispose(){this.splitter.onmousedown=null;this.resetDocumentMouseEvents();this.documentMouseMove=this.documentMouseUp=null;this.direction=this.splitter=this.prevElem=this.nextElem=null}}window.MudExSplitter=n;