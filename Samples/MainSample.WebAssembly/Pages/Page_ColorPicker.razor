@page "/mudexcolor-picker"
@using MudBlazor.Extensions.Components.ObjectEdit.Options
@using MudBlazor.Utilities


<PageHeader>MudExColorPicker</PageHeader>

<DemoComponent CodeFile="@($"Pages/{GetType().Name}.razor")" >
    
    <MudGrid>
        <MudItem md="8" Class="d-flex justify-center">
            <MudPaper Class="d-flex flex-column mud-width-full pt-5 pl-5 pr-5">
                <MudExColorPicker DisableToolbar="false" @bind-Value="@color" @ref="component"></MudExColorPicker>
            </MudPaper>
        </MudItem>
        <MudItem md="4">
            <MudPaper Class="px-4 pt-2 pb-4" Style="height: 70vh; overflow: auto">
                <MudExObjectEdit MetaConfiguration="@Configure()" Value="@component"></MudExObjectEdit>
            </MudPaper>
        </MudItem>
    </MudGrid>

</DemoComponent>


@code {
    MudExColorPicker component;
    MudColor color = new("#ff0000");
    private Action<ObjectEditMeta<MudExColorPicker>> Configure()
    {
        return meta =>
        {
            meta.Property(m => m.UseColorPaletteInNativeBrowserControl).IgnoreIf(m => !m.UseNativeBrowserControl);
            meta.Property(m => m.UseMudExColorBubble).IgnoreIf(m => m.UseNativeBrowserControl);
            meta.Property(m => m.UseNativeBrowserControl).IgnoreIf(m => m.UseMudExColorBubble);
            meta.Property(p => p.Palette)
                .WithGroup("Palette");
            meta
                .IgnoreAllReadOnlyFields()
                .IgnoreAllInheritedFields(p => p.Value, p => p.Palette, p => p.PickerVariant);
        };
    }

}