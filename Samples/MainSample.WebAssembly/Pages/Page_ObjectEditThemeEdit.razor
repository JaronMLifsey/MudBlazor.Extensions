@page "/theme-edit"

@attribute [Demo(Group = "MudExObjectEdit", Name = "Edit Current Theme", Order = 7, Documentation = "This demonstrate the MudExObjectEdit for an instance of a MudTheme ", Icon = Icons.Material.Outlined.Palette, ForComponentTypes = new[] { typeof(MudExObjectEdit<>), typeof(MudExObjectEditForm<>) })]


<DemoComponent PageType="@GetType()" DocFiles="@(new[] {"Docs/ObjectEdit.md"})" CodeFiles="@(new[] {$"Pages/{GetType().Name}.razor"})">
    <MudExThemeEdit AllowModeToggle="true" 
                    TTheme="ClientTheme"
                    IsDark="@MainLayout.Instance.IsDark" 
                    Presets="@_themes"
                    @bind-EditMode="@_editMode"
                    ThemeChanged="@ThemeChanged"
                    Theme="@ClientTheme.CurrentTheme"></MudExThemeEdit>
</DemoComponent>


@code {

    private ThemeEditMode _editMode { get; set; } = ThemeEditMode.Simple;
    private List<ClientTheme> _themes = new() { ClientTheme.CurrentTheme, ClientTheme.Another };
    
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        MainLayout.Instance.ThemeChanged += (_, _) => StateHasChanged();
    }


    private void ThemeChanged(ClientTheme theme)
    {
        MainLayout.Instance.SetTheme(theme);
    }

}